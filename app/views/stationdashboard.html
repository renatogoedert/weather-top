#{extends 'main.html' /}
#{set title:'Dashboard' /}

#{menu id:"stationdashboard"/}

<section class="ui stacked segment form">
  <header class="ui header">
    ${station.name}
  </header>
  #{list items:station.readings, as:'reading'}
  #{if reading_isLast}
  <div class="ui equal width padded grid">
    <div class="black column">
      <h1 class="ui grey inverted small header">${station.name}</h1>
      <i class="cloud sun icon"></i>
    </div>
    <div class="black column">
      <h1 class="ui grey inverted small header"> Weather</h1>
      <i class="map marker icon"></i>
      <p class="ui grey inverted tiny header">${reading.codeToWeather(reading.code)}</p>
    </div>
    <div class="black column">
      <h1 class="ui grey inverted small header">Temp</h1>
      <i class="temperature low icon"></i>
      <p class="ui grey inverted tiny header">${reading.temperature} C</p>
      <p class="ui grey inverted tiny header">${reading.ceToFa(reading.temperature)} F</p>
      #{if station.temperatureTrend() == 2}
      <p class="ui grey inverted tiny header">
        <i class="arrow up icon"></i>
      </p>
      #{/if}
      #{if station.temperatureTrend() == 1}
      <p class="ui grey inverted tiny header">
        <i class="arrow down icon"></i>
      </p>
      #{/if}
    </div>
    <div class="black column">
      <h1 class="ui grey inverted small header">Wind</h1>
      <i class="wind icon"></i>
      <p class="ui grey inverted tiny header">${reading.windInBf(reading.windSpeed)} bft</p>
      <p class="ui grey inverted tiny header">${reading.windDirectionString(reading.windSpeed)} bft</p>
      <p class="ui grey inverted tiny header">${reading.windChill(reading.temperature, reading.windSpeed)} bft</p>
      <p class="ui grey inverted tiny header">Max: ${station.getMaxWindSpeed(station.readings)}</p>
      <p class="ui grey inverted tiny header">Min: ${station.getMinWindSpeed(station.readings)}</p>
      #{if station.pressureTrend() == 1}
      <p class="ui grey inverted tiny header">
        <i class="arrow up icon"></i>
      </p>
      #{/if}
      #{if station.pressureTrend() == 2}
      <p class="ui grey inverted tiny header">
        <i class="arrow down icon"></i>
      </p>
      #{/if}
    </div>
    <div class="black column">
      <h1 class="ui grey inverted small header">Pressure</h1>
      <i class="globe icon"></i>
      <p class="ui grey inverted tiny header">${reading.pressure} hpa</p>
      <p class="ui grey inverted tiny header">Max: ${station.getMaxPressure(station.readings)}</p>
      <p class="ui grey inverted tiny header">Min: ${station.getMinPressure(station.readings)}</p>
      #{if station.windTrend() == 1}
      <p class="ui grey inverted tiny header">
        <i class="arrow up icon"></i>
      </p>
      #{/if}
      #{if station.windTrend() == 2}
      <p class="ui grey inverted tiny header">
        <i class="arrow down icon"></i>
      </p>
      #{/if}
    </div>
  </div>
  #{/if}
  #{/list}
  #{list items:station.readings, as:'reading'}
  <table class="ui fixed table">
    <thead>
    <tr>
      <th>Date</th>
      <th>Code</th>
      <th>Temp</th>
      <th>Wind Speed</th>
      <th>Pressure</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td> ${reading.date} </td>
      <td> ${reading.code} </td>
      <td> ${reading.temperature} </td>
      <td> ${reading.windSpeed} </td>
      <td> ${reading.pressure} </td>
    <tr>
      #{/list}
    </tbody>
  </table>

  <form class="ui stacked segment form" action="/dashboard/${station.name}/addreading" method="POST">
    <h1 class="ui small header">Add Reading</h1>
    <div class="five fields">
      <div class="field">
        <label>Code</label>
        <input placeholder="Code" type="text" name="code">
      </div>
      <div class="field">
        <label>Temperature</label>
        <input placeholder="00.0 C" type="text" name="temperature">
      </div>
      <div class="field">
        <label>Wind Speed</label>
        <input placeholder="00.00 Km/h" type="text" name="windSpeed">
      </div>
      <div class="field">
        <label>Pressure</label>
        <input placeholder="000hPa" type="text" name="pressure">
      </div>
      <div class="field">
        <label>Wind Direction</label>
        <input placeholder="000deg" type="text" name="windDirection">
      </div>
    </div>
    <button class="ui blue submit button">Add Reading</button>
  </form>
</section>